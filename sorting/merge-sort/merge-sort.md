# ë³‘í•© ì •ë ¬(Merge Sort) ì •ë¦¬

## 1ï¸âƒ£ ë³‘í•© ì •ë ¬ì´ë€?

**ë³‘í•© ì •ë ¬(Merge Sort)** ì´ë€

> ë°°ì—´ì„ **ë°˜ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ê°ê° ì •ë ¬í•œ í›„ ë³‘í•©**í•˜ëŠ” ë¶„í• ì •ë³µ ì•Œê³ ë¦¬ì¦˜
> ì„ ì˜ë¯¸í•œë‹¤.

ì¦‰, **"ë¶„í•  â†’ ì •ë ¬ â†’ ë³‘í•©"** ê³¼ì •ì„ ì¬ê·€ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ì´ë‹¤.

---

## 2ï¸âƒ£ ì–¸ì œ ì‚¬ìš©í• ê¹Œ?

ë³‘í•© ì •ë ¬ì€ ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì—ì„œ ì‚¬ìš©ëœë‹¤:

* ì•ˆì •ì ì¸ ì •ë ¬ì´ í•„ìš”í•  ë•Œ
* ìµœì•…ì˜ ê²½ìš°ì—ë„ `O(N log N)` ë³´ì¥ì´ í•„ìš”í•  ë•Œ
* ì—°ê²° ë¦¬ìŠ¤íŠ¸ ì •ë ¬ì— ì í•©
* ì™¸ë¶€ ì •ë ¬(External Sort)ì— ì‚¬ìš©

### ëŒ€í‘œì ì¸ ì˜ˆì‹œ

* **ì¼ë°˜ì ì¸ ë°°ì—´ ì •ë ¬**
* **ì—°ê²° ë¦¬ìŠ¤íŠ¸ ì •ë ¬**
* **ì—­ìˆœ ìŒ(Count Inversions) ë¬¸ì œ**
* **ì™¸ë¶€ ì •ë ¬** (ë©”ëª¨ë¦¬ì— ë‹¤ ë‹´ì„ ìˆ˜ ì—†ëŠ” í° ë°ì´í„°)

---

## 3ï¸âƒ£ ë³‘í•© ì •ë ¬ì˜ í•µì‹¬ ê°œë…

### ğŸ“Œ 3ë‹¨ê³„ í”„ë¡œì„¸ìŠ¤

ë³‘í•© ì •ë ¬ì€ ë¶„í• ì •ë³µì˜ ì „í˜•ì ì¸ ì˜ˆì‹œë¡œ ë‹¤ìŒ 3ë‹¨ê³„ë¡œ êµ¬ì„±ëœë‹¤:

1. **Divide (ë¶„í• )**: ë°°ì—´ì„ ë°˜ìœ¼ë¡œ ë‚˜ëˆˆë‹¤
2. **Conquer (ì •ë³µ)**: ê° ë¶€ë¶„ì„ ì¬ê·€ì ìœ¼ë¡œ ì •ë ¬í•œë‹¤
3. **Combine (ë³‘í•©)**: ì •ë ¬ëœ ë‘ ë¶€ë¶„ì„ ë³‘í•©í•œë‹¤

### ğŸ“ ë³‘í•© ì •ë ¬ì˜ êµ¬ì¡°

```
[5, 2, 8, 1, 9, 3]
        â”‚
        â”œâ”€ Divide
        â”‚
    [5, 2, 8]    [1, 9, 3]
        â”‚            â”‚
        â”œâ”€ Divide    â”œâ”€ Divide
        â”‚            â”‚
  [5, 2] [8]    [1, 9] [3]
    â”‚     â”‚      â”‚     â”‚
    â”œâ”€ Conquer   â”œâ”€ Conquer
    â”‚            â”‚
  [2, 5] [8]    [1, 9] [3]
    â”‚     â”‚      â”‚     â”‚
    â””â”€ Combine   â””â”€ Combine
        â”‚            â”‚
    [2, 5, 8]    [1, 3, 9]
        â”‚            â”‚
        â””â”€ Combine
        â”‚
    [1, 2, 3, 5, 8, 9]
```

---

## 4ï¸âƒ£ ë³‘í•© ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ì˜ êµ¬ì¡°

### ê¸°ë³¸ êµ¬í˜„

```java
void mergeSort(int[] arr, int left, int right) {
    // Base Case: ë” ì´ìƒ ë‚˜ëˆŒ ìˆ˜ ì—†ëŠ” ê²½ìš°
    if (left >= right) return;
    
    // Divide: ë°°ì—´ì„ ë°˜ìœ¼ë¡œ ë‚˜ëˆ”
    int mid = (left + right) / 2;
    
    // Conquer: ê° ë¶€ë¶„ì„ ì¬ê·€ì ìœ¼ë¡œ ì •ë ¬
    mergeSort(arr, left, mid);
    mergeSort(arr, mid + 1, right);
    
    // Combine: ì •ë ¬ëœ ë‘ ë¶€ë¶„ì„ ë³‘í•©
    merge(arr, left, mid, right);
}
```

### ë³‘í•©(Merge) í•¨ìˆ˜

```java
void merge(int[] arr, int left, int mid, int right) {
    // ì„ì‹œ ë°°ì—´ ìƒì„±
    int[] temp = new int[right - left + 1];
    int i = left;      // ì™¼ìª½ ë¶€ë¶„ì˜ ì‹œì‘ ì¸ë±ìŠ¤
    int j = mid + 1;   // ì˜¤ë¥¸ìª½ ë¶€ë¶„ì˜ ì‹œì‘ ì¸ë±ìŠ¤
    int k = 0;         // ì„ì‹œ ë°°ì—´ì˜ ì¸ë±ìŠ¤
    
    // ë‘ ë¶€ë¶„ì„ ë¹„êµí•˜ë©° ë³‘í•©
    while (i <= mid && j <= right) {
        if (arr[i] <= arr[j]) {
            temp[k++] = arr[i++];
        } else {
            temp[k++] = arr[j++];
        }
    }
    
    // ë‚¨ì€ ìš”ì†Œë“¤ ë³µì‚¬
    while (i <= mid) {
        temp[k++] = arr[i++];
    }
    while (j <= right) {
        temp[k++] = arr[j++];
    }
    
    // ì„ì‹œ ë°°ì—´ì˜ ë‚´ìš©ì„ ì›ë³¸ ë°°ì—´ë¡œ ë³µì‚¬
    for (i = left, k = 0; i <= right; i++, k++) {
        arr[i] = temp[k];
    }
}
```

---

## 5ï¸âƒ£ ë³‘í•© ì •ë ¬ì˜ íŠ¹ì§•

### âœ… ì¥ì 

* **ì•ˆì • ì •ë ¬(Stable Sort)**: ê°™ì€ ê°’ì˜ ìƒëŒ€ì  ìˆœì„œ ìœ ì§€
* **ìµœì•…ì˜ ê²½ìš°ì—ë„ O(N log N)**: ì¼ê´€ëœ ì„±ëŠ¥
* **ì—°ê²° ë¦¬ìŠ¤íŠ¸ì— ì í•©**: ì¸ë±ìŠ¤ ì ‘ê·¼ì´ í•„ìš” ì—†ìŒ
* **ë³‘ë ¬ ì²˜ë¦¬ ê°€ëŠ¥**: ë…ë¦½ì ì¸ í•˜ìœ„ ë¬¸ì œë“¤

### âŒ ë‹¨ì 

* **ì¶”ê°€ ë©”ëª¨ë¦¬ í•„ìš”**: O(N)ì˜ ì„ì‹œ ë°°ì—´ í•„ìš”
* **ì¸ì ‘í•œ ë©”ëª¨ë¦¬ ì ‘ê·¼ì´ ì•„ë‹˜**: ìºì‹œ íš¨ìœ¨ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆìŒ

---

## 6ï¸âƒ£ ì‹œê°„ ë³µì¡ë„ ë¶„ì„

### â±ï¸ ë¶„í•  ë‹¨ê³„: `O(log N)`

* ë°°ì—´ì„ ë°˜ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê³¼ì •ì´ `log N`ë²ˆ ë°˜ë³µë¨
* ê° ë‹¨ê³„ì—ì„œ O(1) ì‹œê°„ ì†Œìš”

### â±ï¸ ë³‘í•© ë‹¨ê³„: `O(N log N)`

* ê° ë ˆë²¨ì—ì„œ ì „ì²´ ë°°ì—´ì„ í•œ ë²ˆì”© ìˆœíšŒ: O(N)
* ë ˆë²¨ì˜ ê°œìˆ˜: O(log N)
* ì´ ì‹œê°„: O(N log N)

### âœ… ì „ì²´ ì‹œê°„ ë³µì¡ë„

```
O(N log N)
```

ëª¨ë“  ê²½ìš°(ìµœì„ , í‰ê· , ìµœì•…)ì— ë™ì¼í•œ ì‹œê°„ ë³µì¡ë„ë¥¼ ê°€ì§„ë‹¤.

---

## 7ï¸âƒ£ ê³µê°„ ë³µì¡ë„

### â±ï¸ ì¬ê·€ í˜¸ì¶œ ìŠ¤íƒ: `O(log N)`

* ìµœëŒ€ ì¬ê·€ ê¹Šì´: `log N`
* ê° ì¬ê·€ í˜¸ì¶œë§ˆë‹¤ ìŠ¤íƒ í”„ë ˆì„ ìƒì„±

### â±ï¸ ì„ì‹œ ë°°ì—´: `O(N)`

* ë³‘í•© ê³¼ì •ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì„ì‹œ ë°°ì—´
* ìµœëŒ€ í¬ê¸°: N

### âœ… ì „ì²´ ê³µê°„ ë³µì¡ë„

```
O(N)
```

---

## 8ï¸âƒ£ ë³‘í•© ì •ë ¬ì˜ êµ¬í˜„ íŒ¨í„´

### íŒ¨í„´ 1: ê¸°ë³¸ êµ¬í˜„ (ìœ„ì—ì„œ ì„¤ëª…í•œ ì½”ë“œ)

### íŒ¨í„´ 2: ì¸ë±ìŠ¤ ë²”ìœ„ë¥¼ ë°˜í™˜í•˜ëŠ” ë²„ì „

```java
int[] mergeSort(int[] arr, int left, int right) {
    if (left >= right) {
        return new int[]{arr[left]};
    }
    
    int mid = (left + right) / 2;
    int[] leftArr = mergeSort(arr, left, mid);
    int[] rightArr = mergeSort(arr, mid + 1, right);
    
    return merge(leftArr, rightArr);
}
```

### íŒ¨í„´ 3: ì—°ê²° ë¦¬ìŠ¤íŠ¸ìš© ë³‘í•© ì •ë ¬

```java
ListNode mergeSort(ListNode head) {
    if (head == null || head.next == null) {
        return head;
    }
    
    // ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜ìœ¼ë¡œ ë‚˜ëˆ„ê¸°
    ListNode mid = getMid(head);
    ListNode right = mid.next;
    mid.next = null;
    
    // ì¬ê·€ì ìœ¼ë¡œ ì •ë ¬
    ListNode leftSorted = mergeSort(head);
    ListNode rightSorted = mergeSort(right);
    
    // ë³‘í•©
    return merge(leftSorted, rightSorted);
}
```

---

## 9ï¸âƒ£ ë³‘í•© ì •ë ¬ì˜ í™œìš©

### ğŸ“Œ ì—­ìˆœ ìŒ(Count Inversions) ë¬¸ì œ

ë³‘í•© ê³¼ì •ì—ì„œ ì—­ìˆœ ìŒì˜ ê°œìˆ˜ë¥¼ ì„¸ëŠ” ë¬¸ì œ:

```java
long countInversions(int[] arr, int left, int right) {
    if (left >= right) return 0;
    
    int mid = (left + right) / 2;
    long count = 0;
    
    count += countInversions(arr, left, mid);
    count += countInversions(arr, mid + 1, right);
    count += mergeAndCount(arr, left, mid, right);
    
    return count;
}

long mergeAndCount(int[] arr, int left, int mid, int right) {
    // ë³‘í•© ê³¼ì •ì—ì„œ ì—­ìˆœ ìŒ ê°œìˆ˜ ì„¸ê¸°
    // ì˜¤ë¥¸ìª½ ë°°ì—´ì˜ ìš”ì†Œê°€ ì™¼ìª½ ë°°ì—´ì˜ ìš”ì†Œë³´ë‹¤ ì‘ì„ ë•Œ
    // ë‚¨ì€ ì™¼ìª½ ë°°ì—´ì˜ ìš”ì†Œ ê°œìˆ˜ë§Œí¼ ì—­ìˆœ ìŒì´ ìƒê¹€
}
```

---

## ğŸ”Ÿ ë³‘í•© ì •ë ¬ vs ë‹¤ë¥¸ ì •ë ¬ ì•Œê³ ë¦¬ì¦˜

### ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ ë¹„êµ

| ì•Œê³ ë¦¬ì¦˜ | ìµœì„  | í‰ê·  | ìµœì•… | ê³µê°„ | ì•ˆì •ì„± |
|---------|------|------|------|------|--------|
| **ë³‘í•© ì •ë ¬** | O(N log N) | O(N log N) | O(N log N) | O(N) | âœ… |
| **í€µ ì •ë ¬** | O(N log N) | O(N log N) | O(NÂ²) | O(log N) | âŒ |
| **í™ ì •ë ¬** | O(N log N) | O(N log N) | O(N log N) | O(1) | âŒ |
| **ì‚½ì… ì •ë ¬** | O(N) | O(NÂ²) | O(NÂ²) | O(1) | âœ… |

---

## âœ¨ í•œ ì¤„ ìš”ì•½

> ë³‘í•© ì •ë ¬ì€ **"ë°°ì—´ì„ ë°˜ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ê°ê° ì •ë ¬í•œ í›„ ë³‘í•©í•˜ëŠ”"** ë¶„í• ì •ë³µ ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ, ìµœì•…ì˜ ê²½ìš°ì—ë„ O(N log N)ì„ ë³´ì¥í•˜ëŠ” ì•ˆì • ì •ë ¬ì´ë‹¤.

