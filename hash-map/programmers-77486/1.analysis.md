# 다단계 칫솔 판매

## 📌 문제 요약

다단계 조직에서 칫솔 판매로 발생한 이익을 분배하는 문제입니다. 각 판매원이 칫솔을 판매하면 발생한 이익의 10%를 자신을 조직에 참여시킨 추천인에게 배분하고, 나머지는 자신이 가집니다. 이 과정이 추천인 체인을 따라 재귀적으로 진행됩니다.

**목표**: 각 판매원이 최종적으로 얻은 이익금을 배열에 담아 반환

---

## 🔍 문제 설명

### 핵심 규칙

1. **이익 분배 규칙**: 판매로 발생한 이익의 10%를 추천인에게 배분, 나머지 90%는 자신이 가짐
2. **재귀적 분배**: 추천인도 자신이 받은 이익의 10%를 자신의 추천인에게 배분
3. **절사 처리**: 10% 계산 시 원 단위에서 절사 (소수점 버림)
4. **최소 금액 제한**: 10%를 계산한 금액이 1원 미만이면 분배하지 않고 자신이 모두 가짐
5. **이익 단가**: 칫솔 한 개당 100원의 이익 발생

### 예시 설명

**조직 구조**:
```
center (민호)
├── john
├── mary
│   ├── edward
│   │   ├── sam
│   │   └── young
│   ├── emily
│   └── jaimie
│       └── tod
```

**판매 기록**:
- young: 12개 판매 → 1,200원 이익
- john: 4개 판매 → 400원 이익
- tod: 2개 판매 → 200원 이익
- emily: 5개 판매 → 500원 이익
- mary: 10개 판매 → 1,000원 이익

**이익 분배 과정**:

1. **young 판매 (1,200원)**:
   - young: 1,200원의 10% = 120원을 edward에게 배분, 자신은 1,080원
   - edward: 120원의 10% = 12원을 mary에게 배분, 자신은 108원
   - mary: 12원의 10% = 1원을 center에게 배분, 자신은 11원
   - center: 1원 받음

2. **john 판매 (400원)**:
   - john: 400원의 10% = 40원을 center에게 배분, 자신은 360원
   - center: 40원 받음

3. **tod 판매 (200원)**:
   - tod: 200원의 10% = 20원을 jaimie에게 배분, 자신은 180원
   - jaimie: 20원의 10% = 2원을 mary에게 배분, 자신은 18원
   - mary: 2원의 10% = 0원 (1원 미만이므로 분배하지 않음), 자신은 2원 모두 가짐

4. **emily 판매 (500원)**:
   - emily: 500원의 10% = 50원을 mary에게 배분, 자신은 450원
   - mary: 50원의 10% = 5원을 center에게 배분, 자신은 45원
   - center: 5원 받음

5. **mary 판매 (1,000원)**:
   - mary: 1,000원의 10% = 100원을 center에게 배분, 자신은 900원
   - center: 100원 받음

**최종 이익 집계**:
- john: 360원
- mary: 11 + 2 + 45 + 900 = 958원
- edward: 108원
- sam: 0원
- emily: 450원
- jaimie: 18원
- tod: 180원
- young: 1,080원

**출력**: `[360, 958, 108, 0, 450, 18, 180, 1080]`

---

## 📥 입력 조건

* `enroll`: 각 판매원의 이름을 담은 배열
  * 길이: 1 이상 10,000 이하
  * 민호(center)의 이름은 포함되지 않음
  * 각 원소 길이: 10 글자 이내의 영문 알파벳 소문자

* `referral`: 각 판매원을 조직에 참여시킨 추천인의 이름을 담은 배열
  * 길이: `enroll`의 길이와 같음
  * `referral[i]`는 `enroll[i]`의 추천인
  * 추천인이 없으면 `"-"`로 표시

* `seller`: 판매량 집계 데이터의 판매원 이름을 나열한 배열
  * 길이: 1 이상 100,000 이하
  * 같은 이름이 중복되어 들어있을 수 있음

* `amount`: 판매량 집계 데이터의 판매 수량을 나열한 배열
  * 길이: `seller`의 길이와 같음
  * 각 원소: 1 이상 100 이하인 자연수

---

## 📤 출력 조건

* 각 판매원이 득한 이익금을 나열한 배열을 반환
* `enroll`에 이름이 포함된 순서에 따라 나열
* 반환 타입: `int[]`

---

## 💡 문제 핵심 해석

이 문제는 **트리 구조에서 재귀적으로 이익을 분배하는 문제**입니다.

### 문제의 본질

1. **트리 구조**: 각 판매원은 하나의 추천인만 가짐 (부모-자식 관계)
2. **재귀적 분배**: 이익이 추천인 체인을 따라 위로 올라가며 분배됨
3. **빠른 조회 필요**: 각 판매마다 추천인을 빠르게 찾아야 함
   - 배열 순회: O(N) 시간 → 시간 초과 가능
   - 해시맵 사용: O(1) 평균 시간 → 시간 제한 내 해결 가능

### 문제를 어떻게 모델링할 수 있는가?

* **그래프 관점**: 트리 구조 (각 노드는 하나의 부모만 가짐)
* **재귀 관점**: 이익 분배가 추천인 체인을 따라 재귀적으로 진행
* **자료구조 관점**: 문자열 키로 추천인을 빠르게 조회해야 함 → 해시맵 필요

➡️ **해시맵으로 조직 구조를 저장하고, 재귀로 이익을 분배**하는 접근이 자연스럽습니다.

---

## ✨ 예시

### 예시 1: 문제에서 제공한 예제

**입력**
```
enroll = ["john", "mary", "edward", "sam", "emily", "jaimie", "tod", "young"]
referral = ["-", "-", "mary", "edward", "mary", "mary", "jaimie", "edward"]
seller = ["young", "john", "tod", "emily", "mary"]
amount = [12, 4, 2, 5, 10]
```

**출력**: `[360, 958, 108, 0, 450, 18, 180, 1080]`

### 예시 2: 문제에서 제공한 두 번째 예제

**입력**
```
enroll = ["john", "mary", "edward", "sam", "emily", "jaimie", "tod", "young"]
referral = ["-", "-", "mary", "edward", "mary", "mary", "jaimie", "edward"]
seller = ["sam", "emily", "jaimie", "edward"]
amount = [2, 3, 5, 4]
```

**출력**: `[0, 110, 378, 180, 270, 450, 0, 0]`

---

## 📝 정리

이 문제는 **해시맵과 재귀를 활용한 트리 구조 이익 분배 문제**입니다.

* **핵심 조건**: 조직 구조 저장, 재귀적 이익 분배, 절사 및 최소 금액 처리
* **전략**: Map으로 조직 구조 저장, 재귀 함수로 이익 분배, Map으로 이익 집계
* **시간 복잡도**: O(N + M × H) - N은 enroll 길이, M은 seller 길이, H는 조직 깊이
* **공간 복잡도**: O(N) - 조직 구조와 이익 집계 맵

