# 알고리즘: 분할정복을 이용한 거듭제곱

> 📖 **전체 알고리즘 설명**: [분할정복을 이용한 거듭제곱 정리](../power.md)

이 문제는 **분할정복을 이용한 거듭제곱** 알고리즘을 사용하여 해결합니다.  
상위 폴더의 [분할정복 거듭제곱 정리 문서](../power.md)에서 알고리즘의 전체 이론과 개념을 확인할 수 있습니다.

---

## 이 문제에서의 분할정복 거듭제곱 적용

### 문제 특성

* **큰 지수**: B가 최대 2,147,483,647
* **모듈로 연산**: 결과를 C로 나눈 나머지 필요
* **시간 제한**: 0.5초 (매우 짧음)
* **메모리 제한**: 128 MB

---

## 이 문제의 특이사항

### 1️⃣ 분할정복 거듭제곱 선택 근거

이 문제에서는 **분할정복을 이용한 거듭제곱** 알고리즘을 선택했습니다.

**선택 이유:**

* ✅ **시간 복잡도**: O(log B)로 매우 빠름
* ✅ **큰 지수 처리**: B가 최대 21억이어도 약 31번의 재귀 호출로 해결
* ✅ **모듈로 연산**: 각 단계에서 모듈로 연산을 적용하여 오버플로우 방지
* ✅ **메모리 효율**: 추가 메모리 사용이 적음

**일반적인 방법을 사용하지 않은 이유:**

* 선형 시간 알고리즘 O(B)는 시간 초과
* B가 최대 2,147,483,647이므로 약 21억 번의 연산 필요
* 시간 제한 0.5초 내에 불가능

### 2️⃣ 핵심 아이디어

* `A^B = A^(B/2) * A^(B/2)` (B가 짝수)
* `A^B = A * A^(B-1)` (B가 홀수)
* 각 단계에서 `mod C` 연산을 적용

### 3️⃣ 시간 복잡도

* **각 재귀 호출**: O(1) (곱셈, 나눗셈, 모듈로 연산)
* **재귀 깊이**: O(log B)
* **전체 시간 복잡도**: **O(log B)**

B가 최대 2,147,483,647이어도 약 31번의 재귀 호출로 해결 가능합니다.

### 4️⃣ 공간 복잡도

* **재귀 호출 스택**: O(log B)
* **추가 메모리**: O(1)
* **전체 공간 복잡도**: **O(log B)**

### 5️⃣ 모듈로 연산의 중요성

각 단계에서 모듈로 연산을 적용하지 않으면:

* 중간 결과가 매우 커져서 오버플로우 발생
* long 타입의 범위를 초과할 수 있음
* 잘못된 결과 또는 런타임 에러 발생

➡️ **각 곱셈 연산마다 모듈로 연산을 적용**해야 합니다.

---

## 핵심 구현 패턴

이 문제에 특화된 분할정복 거듭제곱 구현:

```java
long power(long base, long exponent, long mod) {
    // Base Case
    if (exponent == 0) {
        return 1 % mod;
    }
    if (exponent == 1) {
        return base % mod;
    }
    
    // Divide: 지수를 반으로 나눔
    long half = power(base, exponent / 2, mod);
    
    // Conquer: 절반의 거듭제곱 계산
    long result = (half * half) % mod;
    
    // Combine: 홀수인 경우 추가 곱셈
    if (exponent % 2 == 1) {
        result = (result * base) % mod;
    }
    
    return result;
}
```

### 주의사항

* **모듈로 연산 위치**: 각 곱셈 연산마다 모듈로 연산 적용
* **오버플로우 방지**: `(half * half) % mod` 형태로 계산
* **Base Case 처리**: exponent가 0 또는 1일 때 명시적으로 처리

---

## 다른 분할정복 거듭제곱 문제와의 차이점

| 특징 | 일반 거듭제곱 | 이 문제 (1629) |
|------|--------------|---------------|
| 모듈로 연산 | 선택적 | 필수 (오버플로우 방지) |
| 입력 크기 | 다양 | 매우 큰 수 (최대 21억) |
| 시간 제한 | 다양 | 매우 짧음 (0.5초) |
| 구현 복잡도 | 낮음 | 중간 (모듈로 연산 주의) |

---

## 참고

* 전체 분할정복 거듭제곱 알고리즘 설명: [../power.md](../power.md)
* 문제 분석: [1.analysis.md](./1.analysis.md)
* 알고리즘 적용 근거: [3.reasoning.md](./3.reasoning.md)

