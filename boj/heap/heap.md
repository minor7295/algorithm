# í™(Heap) ì •ë¦¬

## 1ï¸âƒ£ í™ì´ë€?

**í™(Heap)** ì´ë€

> **ì™„ì „ ì´ì§„ íŠ¸ë¦¬(Complete Binary Tree)** ê¸°ë°˜ì˜ ìë£Œêµ¬ì¡°ë¡œ,
> ë¶€ëª¨ ë…¸ë“œì™€ ìì‹ ë…¸ë“œ ê°„ì— íŠ¹ì •í•œ ëŒ€ì†Œ ê´€ê³„ë¥¼ ìœ ì§€í•˜ëŠ” êµ¬ì¡°
> ë¥¼ ì˜ë¯¸í•œë‹¤.

ì¦‰, **"ë¶€ëª¨ ë…¸ë“œê°€ í•­ìƒ ìì‹ ë…¸ë“œë³´ë‹¤ í¬ê±°ë‚˜(ìµœëŒ€ í™) ì‘ê±°ë‚˜(ìµœì†Œ í™) ê°™ì€"** ê´€ê³„ë¥¼ ìœ ì§€í•˜ëŠ” ìë£Œêµ¬ì¡°ì´ë‹¤.

---

## 2ï¸âƒ£ ì–¸ì œ ì‚¬ìš©í• ê¹Œ?

í™ì€ ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì—ì„œ ì‚¬ìš©ëœë‹¤:

* ìš°ì„ ìˆœìœ„ í(Priority Queue) êµ¬í˜„
* ìµœëŒ“ê°’/ìµœì†Ÿê°’ì„ ë¹ ë¥´ê²Œ ì°¾ì•„ì•¼ í•˜ëŠ” ê²½ìš°
* ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ (í™ ì •ë ¬)
* ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜
* ì´ë²¤íŠ¸ ìŠ¤ì¼€ì¤„ë§

### ëŒ€í‘œì ì¸ ì˜ˆì‹œ

* **ìµœëŒ€ í™/ìµœì†Œ í™ êµ¬í˜„** (11279, 1927 ë“±)
* **ìš°ì„ ìˆœìœ„ í ë¬¸ì œ**
* **í™ ì •ë ¬**
* **ìµœë‹¨ ê²½ë¡œ ì•Œê³ ë¦¬ì¦˜**

---

## 3ï¸âƒ£ í™ì˜ í•µì‹¬ ê°œë…

### ğŸ“Œ í™ì˜ ì¢…ë¥˜

| ì¢…ë¥˜ | ì„¤ëª… | ë¶€ëª¨-ìì‹ ê´€ê³„ |
|------|------|---------------|
| **ìµœëŒ€ í™ (Max Heap)** | ë¶€ëª¨ ë…¸ë“œ â‰¥ ìì‹ ë…¸ë“œ | ë£¨íŠ¸ ë…¸ë“œê°€ ìµœëŒ“ê°’ |
| **ìµœì†Œ í™ (Min Heap)** | ë¶€ëª¨ ë…¸ë“œ â‰¤ ìì‹ ë…¸ë“œ | ë£¨íŠ¸ ë…¸ë“œê°€ ìµœì†Ÿê°’ |

### ğŸ“Œ í™ì˜ êµ¬ì¡°

```
        ìµœëŒ€ í™ ì˜ˆì‹œ
           9
         /   \
        7     8
       / \   / \
      3   5 4   6
```

* ë£¨íŠ¸ ë…¸ë“œ(9)ê°€ í•­ìƒ ìµœëŒ“ê°’
* ê° ë¶€ëª¨ ë…¸ë“œëŠ” ìì‹ ë…¸ë“œë³´ë‹¤ í¬ê±°ë‚˜ ê°™ìŒ
* ì™„ì „ ì´ì§„ íŠ¸ë¦¬ êµ¬ì¡°

### ğŸ“Œ ê¸°ë³¸ ì—°ì‚°

í™ì˜ ê¸°ë³¸ ì—°ì‚°ì€ ë‹¤ìŒê³¼ ê°™ë‹¤:

| ì—°ì‚° | ì„¤ëª… | ì‹œê°„ ë³µì¡ë„ |
|------|------|------------|
| **insert (push)** | í™ì— ì›ì†Œ ì¶”ê°€ | O(log N) |
| **delete (pop)** | ë£¨íŠ¸ ë…¸ë“œ ì œê±° ë° ë°˜í™˜ | O(log N) |
| **peek (top)** | ë£¨íŠ¸ ë…¸ë“œ ê°’ í™•ì¸ (ì œê±°í•˜ì§€ ì•ŠìŒ) | O(1) |
| **size** | í™ì— ì €ì¥ëœ ì›ì†Œ ê°œìˆ˜ | O(1) |
| **empty** | í™ì´ ë¹„ì–´ìˆëŠ”ì§€ í™•ì¸ | O(1) |

---

## 4ï¸âƒ£ í™ êµ¬í˜„ ë°©ë²•

### âœ… ë°©ë²• 1: ë°°ì—´ ê¸°ë°˜ êµ¬í˜„

#### í•µì‹¬ ì•„ì´ë””ì–´

* ì™„ì „ ì´ì§„ íŠ¸ë¦¬ë¥¼ ë°°ì—´ë¡œ í‘œí˜„
* ì¸ë±ìŠ¤ ê´€ê³„:
  * ë¶€ëª¨ ë…¸ë“œ: `(i - 1) / 2`
  * ì™¼ìª½ ìì‹: `2 * i + 1`
  * ì˜¤ë¥¸ìª½ ìì‹: `2 * i + 2`

#### ìµœëŒ€ í™ Java ì½”ë“œ ìŠ¤ë‹ˆí«

```java
class MaxHeap {
    private List<Integer> heap;
    
    public MaxHeap() {
        heap = new ArrayList<>();
    }
    
    // ì‚½ì…: ë§¨ ëì— ì¶”ê°€ í›„ ìœ„ë¡œ ì˜¬ë¦¬ê¸° (Up-Heap)
    public void push(int x) {
        heap.add(x);
        int idx = heap.size() - 1;
        
        // ë¶€ëª¨ ë…¸ë“œì™€ ë¹„êµí•˜ì—¬ ìœ„ë¡œ ì˜¬ë¦¬ê¸°
        while (idx > 0) {
            int parent = (idx - 1) / 2;
            if (heap.get(parent) >= heap.get(idx)) break;
            
            // ë¶€ëª¨ì™€ ìì‹ êµí™˜
            swap(parent, idx);
            idx = parent;
        }
    }
    
    // ì‚­ì œ: ë£¨íŠ¸ ì œê±° í›„ ë§ˆì§€ë§‰ ë…¸ë“œë¥¼ ë£¨íŠ¸ë¡œ, ì•„ë˜ë¡œ ë‚´ë¦¬ê¸° (Down-Heap)
    public int pop() {
        if (heap.isEmpty()) return 0;
        
        int root = heap.get(0);
        heap.set(0, heap.get(heap.size() - 1));
        heap.remove(heap.size() - 1);
        
        if (!heap.isEmpty()) {
            downHeap(0);
        }
        
        return root;
    }
    
    private void downHeap(int idx) {
        while (true) {
            int left = 2 * idx + 1;
            int right = 2 * idx + 2;
            int largest = idx;
            
            // ì™¼ìª½ ìì‹ê³¼ ë¹„êµ
            if (left < heap.size() && heap.get(left) > heap.get(largest)) {
                largest = left;
            }
            
            // ì˜¤ë¥¸ìª½ ìì‹ê³¼ ë¹„êµ
            if (right < heap.size() && heap.get(right) > heap.get(largest)) {
                largest = right;
            }
            
            // ë” ì´ìƒ êµí™˜í•  í•„ìš”ê°€ ì—†ìœ¼ë©´ ì¢…ë£Œ
            if (largest == idx) break;
            
            swap(idx, largest);
            idx = largest;
        }
    }
    
    private void swap(int i, int j) {
        int temp = heap.get(i);
        heap.set(i, heap.get(j));
        heap.set(j, temp);
    }
    
    public boolean isEmpty() {
        return heap.isEmpty();
    }
}
```

---

### âœ… ë°©ë²• 2: Java ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©

#### PriorityQueue ì‚¬ìš© (ê¶Œì¥)

```java
// ìµœëŒ€ í™: Comparator.reverseOrder() ì‚¬ìš©
PriorityQueue<Integer> maxHeap = new PriorityQueue<>(Comparator.reverseOrder());

// ìµœì†Œ í™: ê¸°ë³¸ ìƒì„±ì ì‚¬ìš©
PriorityQueue<Integer> minHeap = new PriorityQueue<>();

// ì—°ì‚°
maxHeap.offer(5);        // push
maxHeap.poll();          // pop
maxHeap.peek();          // top
maxHeap.size();          // size
maxHeap.isEmpty();       // empty
```

> **ì°¸ê³ **: Javaì˜ `PriorityQueue`ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ìµœì†Œ í™ì´ë‹¤. ìµœëŒ€ í™ì„ ë§Œë“¤ë ¤ë©´ `Comparator.reverseOrder()`ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

---

## 5ï¸âƒ£ í™ì˜ í™œìš© ì‚¬ë¡€

### ğŸ“Œ ìš°ì„ ìˆœìœ„ í

í™ì€ ìš°ì„ ìˆœìœ„ íì˜ ê°€ì¥ íš¨ìœ¨ì ì¸ êµ¬í˜„ ë°©ë²•ì´ë‹¤:

```java
PriorityQueue<Integer> pq = new PriorityQueue<>(Comparator.reverseOrder());

// ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ ì‘ì—…ë¶€í„° ì²˜ë¦¬
pq.offer(10);
pq.offer(5);
pq.offer(20);

while (!pq.isEmpty()) {
    int task = pq.poll();  // ê°€ì¥ ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ ì‘ì—… ì²˜ë¦¬
    process(task);
}
```

### ğŸ“Œ í™ ì •ë ¬

```java
PriorityQueue<Integer> heap = new PriorityQueue<>();
for (int num : arr) {
    heap.offer(num);
}

int[] sorted = new int[arr.length];
for (int i = 0; i < arr.length; i++) {
    sorted[i] = heap.poll();
}
```

---

## 6ï¸âƒ£ í™ vs ë‹¤ë¥¸ ìë£Œêµ¬ì¡°

### ìë£Œêµ¬ì¡° ë¹„êµ

| ìë£Œêµ¬ì¡° | ìµœëŒ“ê°’/ìµœì†Ÿê°’ ì°¾ê¸° | ì‚½ì… | ì‚­ì œ | ì‹œê°„ ë³µì¡ë„ |
|---------|------------------|------|------|------------|
| **í™** | O(1) | O(log N) | O(log N) | íš¨ìœ¨ì  |
| **ì •ë ¬ëœ ë°°ì—´** | O(1) | O(N) | O(N) | ë¹„íš¨ìœ¨ì  |
| **ì´ì§„ íƒìƒ‰ íŠ¸ë¦¬** | O(log N) | O(log N) | O(log N) | ë³µì¡í•¨ |

### í™ì˜ ì¥ì 

* **ë¹ ë¥¸ ìµœëŒ“ê°’/ìµœì†Ÿê°’ ì ‘ê·¼**: O(1)
* **íš¨ìœ¨ì ì¸ ì‚½ì…/ì‚­ì œ**: O(log N)
* **êµ¬í˜„ì´ ìƒëŒ€ì ìœ¼ë¡œ ê°„ë‹¨**: ë°°ì—´ ê¸°ë°˜ êµ¬í˜„ ê°€ëŠ¥
* **ë©”ëª¨ë¦¬ íš¨ìœ¨ì **: ì™„ì „ ì´ì§„ íŠ¸ë¦¬ êµ¬ì¡°

---

## 7ï¸âƒ£ ì‹œê°„ ë³µì¡ë„ ë¶„ì„

### â±ï¸ ê¸°ë³¸ ì—°ì‚°

* **push**: O(log N) - íŠ¸ë¦¬ì˜ ë†’ì´ë§Œí¼ ë¹„êµ ë° êµí™˜
* **pop**: O(log N) - ë£¨íŠ¸ ì œê±° í›„ ì¬êµ¬ì„±
* **peek**: O(1) - ë£¨íŠ¸ ë…¸ë“œ ì§ì ‘ ì ‘ê·¼
* **size/empty**: O(1) - ë³€ìˆ˜ë¡œ ê´€ë¦¬

### â±ï¸ ê³µê°„ ë³µì¡ë„: `O(N)`

* í™ì— ì €ì¥í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ ìš”ì†Œ ê°œìˆ˜ì— ë¹„ë¡€
* ë°°ì—´ ê¸°ë°˜: O(N)

---

## 8ï¸âƒ£ í™ êµ¬í˜„ ì‹œ ì£¼ì˜ì‚¬í•­

### ğŸ“Œ Up-Heap (ì‚½ì… ì‹œ)

* ìƒˆ ì›ì†Œë¥¼ ë§¨ ëì— ì¶”ê°€
* ë¶€ëª¨ ë…¸ë“œì™€ ë¹„êµí•˜ì—¬ ìœ„ë¡œ ì˜¬ë¦¬ê¸°
* í™ ì„±ì§ˆì„ ë§Œì¡±í•  ë•Œê¹Œì§€ ë°˜ë³µ

### ğŸ“Œ Down-Heap (ì‚­ì œ ì‹œ)

* ë£¨íŠ¸ ë…¸ë“œë¥¼ ë§ˆì§€ë§‰ ë…¸ë“œë¡œ êµì²´
* ìì‹ ë…¸ë“œì™€ ë¹„êµí•˜ì—¬ ì•„ë˜ë¡œ ë‚´ë¦¬ê¸°
* í™ ì„±ì§ˆì„ ë§Œì¡±í•  ë•Œê¹Œì§€ ë°˜ë³µ

### ğŸ“Œ Java ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„ íƒ

* `PriorityQueue` ì‚¬ìš© ê¶Œì¥
* ìµœëŒ€ í™: `new PriorityQueue<>(Comparator.reverseOrder())`
* ìµœì†Œ í™: `new PriorityQueue<>()`

---

## âœ¨ í•œ ì¤„ ìš”ì•½

> í™ì€ **"ë¶€ëª¨ ë…¸ë“œê°€ ìì‹ ë…¸ë“œë³´ë‹¤ í•­ìƒ í¬ê±°ë‚˜(ìµœëŒ€ í™) ì‘ê±°ë‚˜(ìµœì†Œ í™) ê°™ì€"** ì™„ì „ ì´ì§„ íŠ¸ë¦¬ ê¸°ë°˜ ìë£Œêµ¬ì¡°ì´ë©°, ìš°ì„ ìˆœìœ„ í êµ¬í˜„ê³¼ ìµœëŒ“ê°’/ìµœì†Ÿê°’ ë¹ ë¥¸ ì ‘ê·¼ì— í•µì‹¬ì ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤.

